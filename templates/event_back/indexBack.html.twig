{% extends "back/base.html.twig" %}

{% block body %}
    <h1>Event index</h1>

    <div class="hero__search__form">
        <form id="search-form">

            <input type="text" id="search-input" placeholder="Name of the post" >
        </form>

        <div id="search-results"></div>


    <script>
        $(document).ready(function() {
            // Ecouter l'événement de frappe sur le champ de recherche et le changement de date
            $('#search-input).on('keyup change', function() {
                // Récupérer la valeur du champ de recherche
                var query = $('#search-input').val();
                // Récupérer la valeur du champ de date

                // Vérifier si les deux champs sont vides
                if (!query) {
                    $('#search-results').html('<p>Please provide a search criteria.</p>');
                    return;
                }
                // Effectuer la recherche AJAX
                $.ajax({
                    type: 'GET',
                    url: '/eventBack/search',
                    data: {q: query},
                    success: function(data) {
                        var resultsDiv = $('#search-results');
                        resultsDiv.empty();
                        if (data.length === 0) {
                            resultsDiv.append('<p>No results found.</p>');
                        } else {
                            for (var i = 0; i < data.length; i++) {
                                var result = data[i];
                                resultsDiv.append('<a href="' + result.url + '">' + result.nom + '</a>');
                            }
                        }
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            });

        });
    </script>

    <style>

        .b{
            color:#b2b2b2;
        }

        #search-results {
            margin-top: 50px;
            display: flex;
            flex-direction: column;
        }
        #search-results a {
            padding: 10px;
            margin-bottom: 10px;
            background-color: #1c1919;
            color: #333;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.2);
        }
        #search-results a:hover {
            background-color: #eee;
            box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.2);
        }
    </style>

    </div>
    <table class="table">
        <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Lieu</th>
            <th>Category</th>
            <th>Description</th>
           <th>Image</th>
            <th>actions</th>
        </tr>
        </thead>
        <tbody>
        {% for academy in events %}
            <tr>
                <td>{{ academy.id }}</td>
                <td>{{ academy.nom }}</td>
                <td>{{ academy.lieu }}</td>
                <td>{{ academy.category }}</td>
                <td>{{ academy.description }}</td>
                <td class="tddd"> <img class="brrr" src="{{asset(academy.image)}}" alt="" ></td>
                <td>
                    <a href="{{ path('app_event_showBack', {'id': academy.id}) }}"><button class="btn btn-outline-primary">Show</button></a>
                    <a href="{{ path('app_event_editBack', {'id': academy.id}) }}"><button class="btn btn-outline-primary">Edit</button></a>
                    <a href="{{ path('app_event_showPArticipantBack', {'id': academy.id}) }}"><button class="btn btn-outline-primary">Show_participants</button></a>
                    <a href="{{ path('show_organisateur2', {'event_id': academy.id}) }}"><button class="btn btn-outline-primary">Show_organisateur</button></a>

                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="4">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('app_event_newBack') }}"><button class="btn btn-outline-primary">Create new</button></a>
    <style>
        .brrr{
            max-width: 107%;
            max-height: 71%;
            width: 76px;
            height: 53px;
            overflow-clip-margin: content-box;
            overflow: clip;
            vertical-align: middle;
            box-sizing: border-box;
        }
        .tddd{
            width: 110px;
        }
    </style>
{% endblock %}